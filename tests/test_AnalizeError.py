import unittest
import AnalizeError

class MyTest(unittest.TestCase):
    def test_make_output_dict(self):
        golden_output_dict = {"wikiId": 4254735, "y_title": "Psychodynamics", "wikiurl": "http://en.wikipedia.org/wiki/Psychodynamic", "left_context": ["symptoms", ",", "rather", "i", "always", "choose", "to", "go", "to", "the", "core", "or", "genesis", "of", "what", "is", "causing", "the", "symptoms", ".", "i", "pull", "from", "the", "psychological", "models", "of"], "mention_as_list": ["psychodynamic"], "right_context": [",", "existential", ",", "and", "postmodern", "theories", ".", "additionally", ",", "i", "have", "considerable", "experience", "in", "cognitive", "behavioral", "therapy", "(", "cbt", ")", "and", "traumafocused", "cognitive", "behavioral", "therapy", "(", "tfcbt", ")", ".", "253-841-3297"], "left_context_text": "symptoms, rather I always choose to go to the core or genesis of what is causing the symptoms. I pull from the psychological models of", "word": "psychodynamic", "right_context_text": ", existential , and post\u2010modern theories.\u00a0 Additionally, I have considerable experience in Cognitive Behavioral Therapy (CBT) and Trauma\u2010Focused Cognitive Behavioral Therapy (TF\u2010CBT). 253-841-3297", "y_category": ["psychodynamics", "psychiatric models", "psychodynamic psychotherapy", "freudian psychology"], "y_category_original": ["Psychodynamics", "Psychodynamic psychotherapy", "Freudian psychology", "Psychiatric models"], "docId": 5218752, "url": "http://www.northwestcounsel.com/about-me.html", "freebaseID": "Some(9202a8c04000641f8000000000ac4b57)", "y_wikiurl_dump": "https://en.wikipedia.org/wiki?curid=4254735", "ex_id": "5_34570", "roughen_category": ["psychodynamics", "psychology", "freudian", "psychodynamic", "psychiatric", "models", "psychotherapy"], "experimentId": 95, "BLINK_1th_output": {"BLINK_title": "Psychodynamics", "BLINK_score": 11.077138900756836}, "BLINK_2th_output": {"BLINK_title": "Psychodynamic psychotherapy", "BLINK_score": 1.0523792505264282}, "BLINK_3th_output": {"BLINK_title": "Psychodynamic models of emotional and behavioral disorders", "BLINK_score": -2.918726682662964}, "BLINK_4th_output": {"BLINK_title": "Psychonomics", "BLINK_score": -8.751524925231934}, "BLINK_5th_output": {"BLINK_title": "Psychophysiology", "BLINK_score": -9.00637149810791, "title": "Psychophysiology", "heading": ["Background", "Measures", "Uses", "Emotion", "Psychophysiological inference and physiological computer games", "Citations", "Bibliography"], "ores_articletopics": ["STEM.Biology|437", "STEM.Medicine & Health|998", "STEM.STEM*|993"], "category": ["CS1 errors: missing periodical", "Articles with short description", "Short description matches Wikidata", "Articles needing cleanup from April 2011", "All pages needing cleanup", "Cleanup tagged articles without a reason field from April 2011", "Wikipedia pages needing cleanup from April 2011", "Articles containing Ancient Greek (to 1453)-language text", "Articles needing additional references from August 2016", "All articles needing additional references", "CS1 maint: multiple names: authors list", "Commons category link is locally defined", "Neuropsychology"], "roughen_category": ["list", "text", "errors:", "multiple", "periodical", "references", "wikipedia", "tagged", "to", "pages", "reason", "needing", "maint:", "containing", "neuropsychology", "short", "articles", "with", "august 2016", "greek", "without", "cs1", "a", "authors", "ancient", "april 2011", "all", "1453)-language", "additional", "cleanup", "field", "description", "names:", "missing"]}}
        test_data = {"wikiId": 4254735, "y_title": "Psychodynamics", "wikiurl": "http://en.wikipedia.org/wiki/Psychodynamic", "left_context": ["symptoms", ",", "rather", "i", "always", "choose", "to", "go", "to", "the", "core", "or", "genesis", "of", "what", "is", "causing", "the", "symptoms", ".", "i", "pull", "from", "the", "psychological", "models", "of"], "mention_as_list": ["psychodynamic"], "right_context": [",", "existential", ",", "and", "postmodern", "theories", ".", "additionally", ",", "i", "have", "considerable", "experience", "in", "cognitive", "behavioral", "therapy", "(", "cbt", ")", "and", "traumafocused", "cognitive", "behavioral", "therapy", "(", "tfcbt", ")", ".", "253-841-3297"], "left_context_text": "symptoms, rather I always choose to go to the core or genesis of what is causing the symptoms. I pull from the psychological models of", "word": "psychodynamic", "right_context_text": ", existential , and post\u2010modern theories.\u00a0 Additionally, I have considerable experience in Cognitive Behavioral Therapy (CBT) and Trauma\u2010Focused Cognitive Behavioral Therapy (TF\u2010CBT). 253-841-3297", "y_category": ["psychodynamics", "psychiatric models", "psychodynamic psychotherapy", "freudian psychology"], "y_category_original": ["Psychodynamics", "Psychodynamic psychotherapy", "Freudian psychology", "Psychiatric models"], "docId": 5218752, "url": "http://www.northwestcounsel.com/about-me.html", "freebaseID": "Some(9202a8c04000641f8000000000ac4b57)", "y_wikiurl_dump": "https://en.wikipedia.org/wiki?curid=4254735", "ex_id": "5_34570", "roughen_category": ["psychodynamics", "psychology", "freudian", "psychodynamic", "psychiatric", "models", "psychotherapy"]}
        blinks_outputs = list(zip([
            "Psychodynamics",
            "Psychodynamic psychotherapy",
            "Psychodynamic models of emotional and behavioral disorders",
            "Psychonomics",
            "Psychophysiology"
        ], [
            11.077138900756836,
            1.0523792505264282,
            -2.918726682662964,
            -8.751524925231934,
            -9.00637149810791
        ]))
        founded_dumps = [{}, {}, {}, {},
            {"title": "Psychophysiology", "heading": ["Background", "Measures", "Uses", "Emotion", "Psychophysiological inference and physiological computer games", "Citations", "Bibliography"], "ores_articletopics": ["STEM.Biology|437", "STEM.Medicine & Health|998", "STEM.STEM*|993"], "category": ["CS1 errors: missing periodical", "Articles with short description", "Short description matches Wikidata", "Articles needing cleanup from April 2011", "All pages needing cleanup", "Cleanup tagged articles without a reason field from April 2011", "Wikipedia pages needing cleanup from April 2011", "Articles containing Ancient Greek (to 1453)-language text", "Articles needing additional references from August 2016", "All articles needing additional references", "CS1 maint: multiple names: authors list", "Commons category link is locally defined", "Neuropsychology"], "roughen_category": ["list", "text", "errors:", "multiple", "periodical", "references", "wikipedia", "tagged", "to", "pages", "reason", "needing", "maint:", "containing", "neuropsychology", "short", "articles", "with", "august 2016", "greek", "without", "cs1", "a", "authors", "ancient", "april 2011", "all", "1453)-language", "additional", "cleanup", "field", "description", "names:", "missing"]}
        ]

        output_dict = AnalizeError.Program().make_output_dict(
            golden_output_dict["experimentId"],
            test_data,
            blinks_outputs,
            founded_dumps,
        )
        self.assertEqual(golden_output_dict, output_dict)

if __name__ == '__main__':
    unittest.main()
